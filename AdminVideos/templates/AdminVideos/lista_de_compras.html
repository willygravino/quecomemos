{% extends "AdminVideos/index.html" %}

{% load static %}

{% block un_video %}

<div class="row">
    <div class="col-md-4">

    <section>
        <h1>Menúes Programados</h1>

        <form action="{% url 'menu-elegido' %}" method="post">
            {% csrf_token %}

<h6>platos por día: {{ platos_por_dia }}</h6>

            {% for fecha, platos in platos_por_dia.items %}

            <div class="card">
                <div class="card-body">
                    <h5>{{ fecha }}
                    </h5>

                    <h5>ALMUERZO</h5>


                    {# Entradas #}
                    {% if platos.entrada1.plato %}
                        <h5>la entrada 1 {{platos.entrada1.plato}}</h5>

                        <input type="checkbox" id="ent1{{ fecha }}" 
                            name="{{ platos.entrada1.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.entrada1.plato }}" 
                            {% if platos.entrada1.elegido %} checked {% endif %}>
                        <label for="ent1{{ fecha }}">Entrada 1 incluida</label>
                    {% else %}
                        <p>No se encontró entrada 1.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.entrada2.plato %}
                        <input type="checkbox" id="ent2{{ fecha }}" 
                            name="{{ platos.entrada2.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.entrada2.plato }}" 
                            {% if platos.entrada2.elegido %} checked {% endif %}>
                        <label for="ent2{{ fecha }}">Entrada 2 incluida</label>
                    {% else %}
                        <p>No se encontró entrada 2.</p>
                    {% endif %}
                    <p></p>

                   

                    {# Dips #}
                    {% if platos.dip1.plato %}
                        <input type="checkbox" id="dip1{{ fecha }}" 
                            name="{{ platos.dip1.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.dip1.plato }}" 
                            {% if platos.dip1.elegido %} checked {% endif %}>
                        <label for="dip1{{ fecha }}">Dip 1 incluido</label>
                    {% else %}
                        <p>No se encontró dip 1.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.dip2.plato %}
                        <input type="checkbox" id="dip2{{ fecha }}" 
                            name="{{ platos.dip2.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.dip2.plato }}" 
                            {% if platos.dip2.elegido %} checked {% endif %}>
                        <label for="dip2{{ fecha }}">Dip 2 incluido</label>
                    {% else %}
                        <p>No se encontró dip 2.</p>
                    {% endif %}
                    <p></p>

                    {# Tragos #}
                    {% if platos.trago1.plato %}
                        <input type="checkbox" id="trago1{{ fecha }}" 
                            name="{{ platos.trago1.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.trago1.plato }}" 
                            {% if platos.trago1.elegido %} checked {% endif %}>
                        <label for="trago1{{ fecha }}">Trago 1 incluido</label>
                    {% else %}
                        <p>No se encontró trago 1.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.almuerzo %}

                        <div class="plato-info">
                            <h6 class="card-subtitle mb-2 text-muted">>>>>{{ platos.almuerzo }}</h6>
                            <p class="card-text">{{ platos.almuerzo_info }}</p>

                            {% if platos.almuerzo_info %}
                                <input type="checkbox" id="inc_almuerzo_{{ fecha }}" name="{{ platos.almuerzo }}{{ fecha|date:"d M. Y"|lower }}"
                                    value="{{ platos.almuerzo_info }}" {% if platos.almuerzo_elegido %} checked {% endif %}>
                                <label for="inc_almuerzo_{{ fecha }}">Plato incluido</label>
                            {% else %}
                                <p>No se encontraron ingredientes para el almuerzo.</p>
                            {% endif %}

                            {% for key, value in platos.variedades.items %}
                                {% if value.variedad %}
                                    <p>Variedad: {{ value.variedad }}</p>

                                    <h5>Ingredientes variedad: {{value.ingredientes_de_variedades}}</h5>
                                    <input type="checkbox" id="incluir{{key}}" name="{{ value.variedad }}{{ fecha|date:"d M. Y"|lower }}"
                                        value="{{value.ingredientes_de_variedades}}" {% if value.elegido %} checked {% endif %}>
                                    <label for="incluir{{key}}">Variedad incluida</label>
                                {% endif %}
                            {% endfor %}
                    {% else %}
                        <p>NO HAY ALMUERZO.</p>
                    {% endif %}
                    </div><br>

                    {# Salsas #}
                    {% if platos.salsa1.plato %}
                        <input type="checkbox" id="salsa1{{ fecha }}" 
                            name="{{ platos.salsa1.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.salsa1.plato }}" 
                            {% if platos.salsa1.elegido %} checked {% endif %}>
                        <label for="salsa1{{ fecha }}">Salsa 1 incluida</label>
                    {% else %}
                        <p>No se encontró salsa 1.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.salsa2.plato %}
                        <input type="checkbox" id="salsa2{{ fecha }}" 
                            name="{{ platos.salsa2.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.salsa2.plato }}" 
                            {% if platos.salsa2.elegido %} checked {% endif %}>
                        <label for="salsa2{{ fecha }}">Salsa 2 incluida</label>
                    {% else %}
                        <p>No se encontró salsa 2.</p>
                    {% endif %}
                    <p></p>

                  

                    {% if platos.guarnicion1.plato %}
                        <input type="checkbox" id="guar1{{ fecha }}" 
                            name="{{ platos.guarnicion1.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.guarnicion1.plato }}" 
                            {% if platos.guarnicion1.elegido %} checked {% endif %}>
                        <label for="guar1{{ fecha }}">Guarnición 1 incluida</label>
                    {% else %}
                        <p>No se encontró guarnición 1.</p>
                    {% endif %}

                    <p></p>
                    {% if platos.guarnicion2.plato %}
                        <input type="checkbox" id="guar2{{ fecha }}" 
                            name="{{ platos.guarnicion2.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.guarnicion2.plato }}" 
                            {% if platos.guarnicion2.elegido %} checked {% endif %}>
                        <label for="guar2{{ fecha }}">Guarnición 2 incluida</label>
                    {% else %}
                        <p>No se encontró guarnición 2.</p>
                    {% endif %}                    
                    <p></p>

                    {# Postres #}
                    {% if platos.postre1.plato %}
                        <input type="checkbox" id="postre1{{ fecha }}" 
                            name="{{ platos.postre1.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.postre1.plato }}" 
                            {% if platos.postre1.elegido %} checked {% endif %}>
                        <label for="postre1{{ fecha }}">Postre 1 incluido</label>
                    {% else %}
                        <p>No se encontró postre 1.</p>
                    {% endif %}
                    <p></p>

                    <h5>CENA</h5>


                    {% if platos.entrada3.plato %}
                        <input type="checkbox" id="ent3{{ fecha }}" 
                            name="{{ platos.entrada3.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.entrada3.plato }}" 
                            {% if platos.entrada3.elegido %} checked {% endif %}>
                        <label for="ent3{{ fecha }}">Entrada 3 incluida</label>
                    {% else %}
                        <p>No se encontró entrada 3.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.entrada4.plato %}
                        <input type="checkbox" id="ent4{{ fecha }}" 
                            name="{{ platos.entrada4.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.entrada4.plato }}" 
                            {% if platos.entrada4.elegido %} checked {% endif %}>
                        <label for="ent4{{ fecha }}">Entrada 4 incluida</label>
                    {% else %}
                        <p>No se encontró entrada 4.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.dip3.plato %}
                        <input type="checkbox" id="dip3{{ fecha }}" 
                            name="{{ platos.dip3.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.dip3.plato }}" 
                            {% if platos.dip3.elegido %} checked {% endif %}>
                        <label for="dip3{{ fecha }}">Dip 3 incluido</label>
                    {% else %}
                        <p>No se encontró dip 3.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.dip4.plato %}
                        <input type="checkbox" id="dip4{{ fecha }}" 
                            name="{{ platos.dip4.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.dip4.plato }}" 
                            {% if platos.dip4.elegido %} checked {% endif %}>
                        <label for="dip4{{ fecha }}">Dip 4 incluido</label>
                    {% else %}
                        <p>No se encontró dip 4.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.trago2.plato %}
                        <input type="checkbox" id="trago2{{ fecha }}" 
                            name="{{ platos.trago2.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.trago2.plato }}" 
                            {% if platos.trago2.elegido %} checked {% endif %}>
                        <label for="trago2{{ fecha }}">Trago 2 incluido</label>
                    {% else %}
                        <p>No se encontró trago 2.</p>
                    {% endif %}
                    <p></p>


                    {% if platos.cena %}

                        <div class="plato-info">
                            {% if platos.cena_info %}
                                <h6 class="card-subtitle mb-2 text-muted">{{ platos.cena }}</h6>

                                <p class="card-text">{{ platos.cena_info }}</p>

                                <input type="checkbox" id="{{ platos.cena }}" name="{{ platos.cena }}{{ fecha|date:"d M. Y"|lower }}"
                                    value="{{ platos.cena_info }}"  {% if platos.cena_elegida %} checked {% endif %}>
                                <label for="inc_cena_{{ fecha }}">Incluir Plato</label>
                            {% else %}
                              <p>No se encontraron ingredientes para la cena.</p>
                            {% endif %}
                        </div>

                        {% for key, value in platos.variedades_cena.items %}
                            {% if value.variedad %}
                            <p>Variedad: {{ value.variedad }}</p>

                            <h5>Ingredientes variedad: {{value.ingredientes_de_variedades}}</h5>
                            <input type="checkbox" id="incluir{{key}}" name="{{ value.variedad }}{{ fecha|date:"d M. Y"|lower }}"
                                value="{{value.ingredientes_de_variedades}}"  {% if value.elegido %} checked {% endif %}>
                            <label for="incluir{{key}}">Variedad incluida</label>
                            {% endif %}
                        {% endfor %}

                    {% else %}
                        <p>NO HAY CENA.</p>
                    {% endif %}
                    </div><br>    
                    
                        <p></p>

                    {% if platos.salsa3.plato %}
                        <input type="checkbox" id="salsa3{{ fecha }}" 
                            name="{{ platos.salsa3.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.salsa3.plato }}" 
                            {% if platos.salsa3.elegido %} checked {% endif %}>
                        <label for="salsa3{{ fecha }}">Salsa 3 incluida</label>
                    {% else %}
                        <p>No se encontró salsa 3.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.salsa4.plato %}
                        <input type="checkbox" id="salsa4{{ fecha }}" 
                            name="{{ platos.salsa4.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.salsa4.plato }}" 
                            {% if platos.salsa4.elegido %} checked {% endif %}>
                        <label for="salsa4{{ fecha }}">Salsa 4 incluida</label>
                    {% else %}
                        <p>No se encontró salsa 4.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.guarnicion3.plato %}
                        <input type="checkbox" id="guar3{{ fecha }}" 
                            name="{{ platos.guarnicion3.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.guarnicion3.plato }}" 
                            {% if platos.guarnicion3.elegido %} checked {% endif %}>
                        <label for="guar3{{ fecha }}">Guarnición 3 incluida</label>
                    {% else %}
                        <p>No se encontró guarnición 3.</p>
                    {% endif %}
                    <p></p>

                    {% if platos.guarnicion4.plato %}
                        <input type="checkbox" id="guar4{{ fecha }}" 
                            name="{{ platos.guarnicion4.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.guarnicion4.plato }}" 
                            {% if platos.guarnicion4.elegido %} checked {% endif %}>
                        <label for="guar4{{ fecha }}">Guarnición 4 incluida</label>
                    {% else %}
                        <p>No se encontró guarnición 4.</p>
                    {% endif %}
                    <p></p>
                 

                    {% if platos.postre2.plato %}
                        <input type="checkbox" id="postre2{{ fecha }}" 
                            name="{{ platos.postre2.plato }}{{ fecha|date:"d M. Y"|lower }}"
                            value="{{ platos.postre2.plato }}" 
                            {% if platos.postre2.elegido %} checked {% endif %}>
                        <label for="postre2{{ fecha }}">Postre 2 incluido</label>
                    {% else %}
                        <p>No se encontró postre 2.</p>
                    {% endif %}
                    <p></p>


                </div>
            </div>

            {% endfor %}
            <input type="submit" value="Editar Lista de Compras">

    </section>
</div>

<div class="col-md-4">

    <!-- <section> -->
        <form>

            <h3>EDITA LISTA DE COMPRAS</h3>
            <!-- <p>ingredientes_separados_por_comas: {{ ingredientes_separados_por_comas }}</p> -->

            <!-- <div class="row">
                <div class="d-flex"> -->
                
                    {% if ingredientes_separados_por_comas %}
                        {% for ingrediente, valor  in ingredientes_separados_por_comas.items %}
                            <input type="checkbox" id="{{ ingrediente }}" name="ingrediente_a_comprar" value="{{ ingrediente }}"  {% if valor.estado == "no-tengo" %} checked {% endif %}>
                            <!-- <h3>ing >>{{ ingrediente }}<<</h3>
                            <h3>estado >>{{ valor.estado }}<<</h3> -->
                            <!-- <h3>comentario >>{{ valor.comentario }}<<</h3>  -->

                            <label for="{{ ingrediente }}">{{ ingrediente }}</label>
                            <input type="text" id="{{ ingrediente }}_detalle" name="{{ ingrediente }}_detalle" placeholder="Comentario">

                            <br>
                        {% endfor %}
                    {% else %}
                         <p>No hay ingredientes para comprar. Seleccione menúes.</p>
                    {% endif %}
            
                        <!-- <i class="fa-solid fa-shrimp" style="font-size: 1.3rem;"></i>
                        <span>imprimir lista de compras</span>
                    </a>  -->

                    <input type="submit" value="Imprimir lista de compras y Plan">
                    <!-- <input type="submit" value="Imprimir Plan de Comidas"> -->
                <!-- </div>
            </div> -->
        </form>

    <!-- </section> -->
</div>

<div class="col-md-4">
    <section>
        <H3>LISTA DE COMPRAS</H3>
        {% if lista_de_compras %}
          <ul>
            {% for item in lista_de_compras %}
              <li>{{ item }}</li>
            {% endfor %}

            <a href="https://wa.me/5491145342640?text={{ mensaje_whatsapp }}" target="_blank">Enviar lista por WhatsApp</a>

          </ul>
<!-- 
           <h2>{{ lista_de_compras }}</h2> -->
        {% else %}
           <h2>NO HAY INGREDIENTES PARA COMPRAR</h2>
        {% endif %}





    </section>
</div>

{% endblock %}